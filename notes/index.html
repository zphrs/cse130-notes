<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/cse130-notes/favicon.svg"><meta name="generator" content="Astro v4.1.2"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&family=Comfortaa:wght@700&family=Fira+Code&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&family=Comfortaa:wght@700&family=Fira+Code&display=swap"></noscript><title>All Notes</title><link rel="stylesheet" href="/cse130-notes/_astro/_slug_.5YG6IZmR.css" />
<link rel="stylesheet" href="/cse130-notes/_astro/index.VcNSoyQ1.css" /><script type="module" src="/cse130-notes/_astro/hoisted.VzPUpvUv.js"></script></head> <body>   <h1 data-astro-cid-mejek24l>All Notes</h1> <ul class="headings" data-astro-cid-mejek24l> <li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 2 - Complexity</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 2 - Complexity <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#day-2---complexity" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 2 - Complexity</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 2 - Complexity <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#issues-of-complexity" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Issues of Complexity</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Issues of Complexity <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#emergent-properties" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Emergent Properties</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Emergent Properties <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>When you link stuff together new properties emerge</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#propagation-of-effects" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Propagation of Effects</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Propagation of Effects <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>If there’s a bug in one part then that bug can propagate through the system creating more issues</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#incommensurate-scaling" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Incommensurate Scaling</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Incommensurate Scaling <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>When something scales differently compared to another part of the system</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#tradeoffs" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Tradeoffs</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Tradeoffs <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <hr>
<p>Ex. Time vs Memory</p> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#complexity-definitions" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Complexity Definitions</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Complexity Definitions <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Large number of components with a large number of interconnections which are not uniformly organized.</p>
<p>If there are a lot of irregularities and/or it takes many words to describe the system.</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#sources-of-complexity" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Sources of Complexity</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Sources of Complexity <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#many-responsibilities" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Many Responsibilities</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Many Responsibilities <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>If the system has to do more then it becomes more complex</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#many-constraints" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Many Constraints</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Many Constraints <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>If the system has to do the same with fewer resources then it becomes more complex</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#law-of-diminishing-returns" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Law of Diminishing Returns</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Law of Diminishing Returns <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>The better the system gets the harder future potential gains get</p>
<p>“Lowest hanging fruit”</p> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#management-strategies" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Management Strategies</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Management Strategies <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#modularity" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Modularity</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Modularity <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Break a big problem into smaller pieces.</p>
<hr>
<ul>
<li>Reduces number of components and interactions between different parts of the codebase</li>
<li>Allows for swapping out modules/easy upgrades/rewrites within a singular module</li>
</ul>
<p>Decreases debugging time because once you find which “neighborhood” is responsible for the bug, that “neighborhood” is much smaller than the entire system.</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#abstraction" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Abstraction</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Abstraction <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Break into components at logical points and then treat an individual component as a black box which you can trust.</p>
<p>Benefits of Robustness:</p>
<p>Allows for slight differences on the inputs and allows the inputs to be used for more</p>
<p>Ex. JSON api calls usually return a ton of data just in case the developer might need that extra data</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#layering" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Layering</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Layering <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Abstractions + Modularity -> many interconnections?</p>
<p>Reduce interconnections with layering</p>
<p>Modules in a layer may only interact with modules in the layer or up/down one layer.</p>
<p>Easier to use and add more functionality but it adds some overhead</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#hierarchy" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Hierarchy</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Hierarchy <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Combine small groups of modules into small subsystems</p>
<p>Then combine small subsystems into large systems</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day02/#naming" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Naming</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Naming <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Use names to make modules easy to find and easy to replace</p>
<p>Use names to have different sources that get treated the same way</p> </span> </a>  </li></ul></details></li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 3 - Memory</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 3 - Memory <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#day-3---memory" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 3 - Memory</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 3 - Memory <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>There are three possible functions which a computer might do, store, compute, and communicate.</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#store" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Store</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Store <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Remembers stuff</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#memory" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Memory</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Memory <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>A place to remember things, modeled as a map between a space of names and a space of values (relies on name abstraction)</p>
<p>Interface:</p>
<p>Write(name, value) - Assign a new value to a name</p>
<p>Value = Read(name) - Get value of name</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-4" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#memory-properties" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Memory Properties</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Memory Properties <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-5" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#volatility" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Volatility</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Volatility <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Whether the memory needs power to be applied consistently (span of seconds) in order to remember.</p> </span> </a>  </li><li class="depth-5" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#abundance" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Abundance</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Abundance <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>fewer bits as we move upwards from Tape through HDD, SSD, DRAM, and Caches to Registers</p> </span> </a>  </li><li class="depth-5" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#cost" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Cost</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Cost <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>More expensive as we move upwards in terms of $/byte</p> </span> </a>  </li><li class="depth-5" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#granularity" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Granularity</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Granularity <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>the sizes of the values which get requested</p> </span> </a>  </li></ul></details></li><li class="depth-4" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#performance" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Performance</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Performance <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-5" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#bandwidth" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Bandwidth</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Bandwidth <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>memory/time</p> </span> </a>  </li><li class="depth-5" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#latency" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Latency</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Latency <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Time until memory</p> </span> </a>  </li><li class="depth-5" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#synchronous" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Synchronous</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Synchronous <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>One action at a time</p> </span> </a>  </li><li class="depth-5" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#asynchronous" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Asynchronous</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Asynchronous <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Many actions at a time</p> </span> </a>  </li></ul></details></li></ul></details></li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#compute" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Compute</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Compute <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>interprets stuff</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day03/#communicate" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Communicate</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Communicate <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Sends stuff</p> </span> </a>  </li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 4 - Interpreters/Comm Links</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 4 - Interpreters/Comm Links <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#day-4---interpreterscomm-links" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 4 - Interpreters/Comm Links</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 4 - Interpreters/Comm Links <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Interpreters execute instructions and occasionally sends out messages using communication links.</p>
<p>Communication links allow for sending and receiving messages.</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#interpreters---compute" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Interpreters - Compute</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Interpreters - Compute <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Interpreters execute instructions and occasionally sends out messages using communication links.</p>
<hr>
<p>In essence, consists of:</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#instruction-reference" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Instruction Reference</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Instruction Reference <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>reference to next instruction</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#repotoire" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Repotoire</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Repotoire <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>what commands are available</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#environment-reference" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Environment Reference</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Environment Reference <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>where to output stuff</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#list-of-examples" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>List of Examples</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>List of Examples <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-4" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#general-purpose" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>General Purpose</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>General Purpose <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Laptop</li>
<li>Infotainment system in car</li>
</ul> </span> </a>  </li><li class="depth-4" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#special-purpose" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Special Purpose</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Special Purpose <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Keyboard</li>
<li>Mouse</li>
<li>Laser Printer</li>
<li>Software-defined radio</li>
<li>Microwave oven</li>
<li>Clock chip</li>
<li>USB interface</li>
</ul> </span> </a>  </li></ul></details></li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#layers-of-interpretation" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Layers of Interpretation</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Layers of Interpretation <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Interpreters can be built on top of interpreters. (turtles all the way down)</p>
<p>This creates layers of interpreters.</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#interpreter-layer-design-goals" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Interpreter Layer Design Goals</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Interpreter Layer Design Goals <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Do either what was asked or do nothing</li>
<li>Half-completed tasks are not allowed</li>
</ul> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#comm-links---communicate" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Comm Links - Communicate</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Comm Links - Communicate <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#list-of-examples-1" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>List of Examples</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>List of Examples <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-4" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#hardware" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Hardware</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Hardware <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Twisted pair</li>
<li>Coaxial cable</li>
<li>Optical fiber</li>
</ul> </span> </a>  </li><li class="depth-4" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#higher-level" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Higher Level</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Higher Level <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Ethernet</li>
<li>USB</li>
<li>The internet</li>
<li>The telephone system</li>
<li>A Unix pipexw</li>
</ul> </span> </a>  </li></ul></details></li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#operations" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Operations</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Operations <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>SEND(link_name, outgoing_message_buffer)</li>
<li>RECEIVE(link_name, incoming_message_buffer)</li>
</ul>
<hr>
<p>Why not just use memory’s READ/WRITE?</p>
<p>Because:</p>
<ul>
<li>data corruption (collision)</li>
<li>data duplication</li>
<li>data loss</li>
<li>broken connection</li>
<li>congestion</li>
</ul> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#link-names" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Link Names</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Link Names <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>link_name depends on layer:</p>
<ul>
<li>TCP port number</li>
<li>IP address</li>
<li>Internet address</li>
<li>Many parts: roger@<ip>:<port></port></ip></li>
</ul> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day04/#message-buffers" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Message Buffers</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Message Buffers <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Abstractions with buffer length</p> </span> </a>  </li></ul></details></li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day05/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 5 - File I/O</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 5 - File I/O <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day05/#day-5---file-io" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 5 - File I/O</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 5 - File I/O <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day05/#buffered-vs-unbuffered-io" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Buffered vs Unbuffered I/O</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Buffered vs Unbuffered I/O <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>fread is buffered while read is unbuffered.</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day05/#read" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>read</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>read <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#CE9409">#include</span><span style="color:#846905"> &#x3C;unistd.h></span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">int</span><span style="color:#313233"> res </span><span style="color:#CE9409">=</span><span style="color:#345348"> read</span><span style="color:#313233">(</span></span>
<span class="line"><span style="color:#CE9409">    int</span><span style="color:#2D27A4"> fd</span><span style="color:#313233">,</span></span>
<span class="line"><span style="color:#CE9409">    void</span><span style="color:#CE9409"> *</span><span style="color:#2D27A4">buf</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // buffer to read into</span></span>
<span class="line"><span style="color:#CE9409">    size_t</span><span style="color:#2D27A4"> count</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // max number of bytes to read</span></span>
<span class="line"><span style="color:#313233">);</span></span></code></pre>
<p>returns number of bytes read, 0 for EOF, -1 for error</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day05/#write" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>write</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>write <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#CE9409">#include</span><span style="color:#846905"> &#x3C;unistd.h></span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">int</span><span style="color:#313233"> res </span><span style="color:#CE9409">=</span><span style="color:#345348"> write</span><span style="color:#313233">(</span></span>
<span class="line"><span style="color:#CE9409">    int</span><span style="color:#2D27A4"> fd</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // file descriptor - gotten from open() call</span></span>
<span class="line"><span style="color:#CE9409">    const</span><span style="color:#CE9409"> void</span><span style="color:#CE9409"> *</span><span style="color:#2D27A4">buf</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // buffer to write from</span></span>
<span class="line"><span style="color:#CE9409">    size_t</span><span style="color:#2D27A4"> count</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // number of bytes to write</span></span>
<span class="line"><span style="color:#313233">);</span></span>
<span class="line"><span style="color:#6E9D87">// returns number of bytes written, -1 for error</span></span></code></pre> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day05/#open" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>open</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>open <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#CE9409">#include</span><span style="color:#846905"> &#x3C;fcntl.h></span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">int</span><span style="color:#313233"> fd </span><span style="color:#CE9409">=</span><span style="color:#345348"> open</span><span style="color:#313233">(</span></span>
<span class="line"><span style="color:#CE9409">    const</span><span style="color:#CE9409"> char</span><span style="color:#CE9409"> *</span><span style="color:#2D27A4">pathname</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // path to file</span></span>
<span class="line"><span style="color:#CE9409">    int</span><span style="color:#2D27A4"> flags</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // flags - see below</span></span>
<span class="line"><span style="color:#CE9409">    mode_t</span><span style="color:#2D27A4"> mode</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // file perms if O_CREAT</span></span>
<span class="line"><span style="color:#313233">);</span></span></code></pre> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day05/#flags" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Flags</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Flags <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li><code>O_RDONLY</code> - read only</li>
<li><code>O_WRONLY</code> - write only</li>
<li><code>O_WRONLY | O_CREAT</code> - create file if it doesn’t exist</li>
<li><code>O_WRONLY | O_TRUNC</code> - truncate file if it exists (delete initial contents of file)</li>
<li><code>O_WRONLY | O_CREAT | O_TRUNC</code> - create file if it doesn’t exist, truncate if it does - equivalent to <code>creat()</code> call</li>
</ul> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day05/#close" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>close</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>close <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#CE9409">#include</span><span style="color:#846905"> &#x3C;unistd.h></span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">int</span><span style="color:#313233"> res </span><span style="color:#CE9409">=</span><span style="color:#345348"> close</span><span style="color:#313233">(</span><span style="color:#CE9409">int</span><span style="color:#2D27A4"> fd</span><span style="color:#313233">);</span></span>
<span class="line"><span style="color:#6E9D87">// returns 0 for success, -1 for error</span></span></code></pre> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day05/#unlink" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>unlink</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>unlink <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Deletes the file at path <code>name</code>.</p>
<pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#CE9409">#include</span><span style="color:#846905"> &#x3C;unistd.h></span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">int</span><span style="color:#313233"> res </span><span style="color:#CE9409">=</span><span style="color:#345348"> unlink</span><span style="color:#313233">(</span><span style="color:#CE9409">const</span><span style="color:#CE9409"> char</span><span style="color:#CE9409"> *</span><span style="color:#2D27A4">name</span><span style="color:#313233">);</span></span>
<span class="line"><span style="color:#6E9D87">// returns 0 for success, -1 for error</span></span></code></pre> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day05/#lseek" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>lseek</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>lseek <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#CE9409">#include</span><span style="color:#846905"> &#x3C;unistd.h></span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">off_t</span><span style="color:#313233"> res </span><span style="color:#CE9409">=</span><span style="color:#345348"> lseek</span><span style="color:#313233">(</span></span>
<span class="line"><span style="color:#CE9409">    int</span><span style="color:#2D27A4"> fd</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // file descriptor</span></span>
<span class="line"><span style="color:#CE9409">    off_t</span><span style="color:#2D27A4"> offset</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // number of bytes to move</span></span>
<span class="line"><span style="color:#CE9409">    int</span><span style="color:#2D27A4"> origin</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // SEEK_SET, SEEK_CUR, SEEK_END</span></span>
<span class="line"><span style="color:#313233">);</span></span>
<span class="line"><span style="color:#6E9D87">// returns new offset from beginning of file, -1 for error</span></span></code></pre> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day05/#offset" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>offset</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>offset <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>SEEK_SET - from beginning of file</li>
<li>SEEK_CUR - from current position</li>
<li>SEEK_END - from end of file</li>
</ul> </span> </a>  </li></ul></details></li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day06/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 6 - Regex</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 6 - Regex <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day06/#day-6---regex" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 6 - Regex</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 6 - Regex <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day06/#regcomp" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>regcomp</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>regcomp <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#313233">regex_t preg;</span></span>
<span class="line"><span style="color:#CE9409">int</span><span style="color:#345348"> regcomp</span><span style="color:#313233">(regex_t </span><span style="color:#CE9409">*</span><span style="color:#2D27A4">preg</span><span style="color:#313233">, </span><span style="color:#CE9409">const</span><span style="color:#CE9409"> char</span><span style="color:#CE9409"> *</span><span style="color:#2D27A4">regex</span><span style="color:#313233">, </span><span style="color:#CE9409">int</span><span style="color:#2D27A4"> cflags</span><span style="color:#313233">);</span></span></code></pre>
<ul>
<li>preg - declared regex_t structure which is a reference to the compiled regular expression.</li>
<li>regex - the regular expression to be compiled (c string).</li>
<li>cflags - flags that control the compilation of the regular expression.
<ul>
<li>REG_EXTENDED - Use extended regular expressions - treats +, ?, parentheses, etc. as special characters without being escaped.</li>
<li>REG_NEWLINE - multiline REGEX.</li>
<li>Can be combined with |.</li>
</ul>
</li>
</ul> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day06/#regfree" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>regfree</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>regfree <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#CE9409">void</span><span style="color:#345348"> regfree</span><span style="color:#313233">(regex_t </span><span style="color:#CE9409">*</span><span style="color:#2D27A4">preg</span><span style="color:#313233">);</span></span></code></pre> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day06/#regexec" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>regexec</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>regexec <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#CE9409">int</span><span style="color:#345348"> regexec</span><span style="color:#313233">(</span></span>
<span class="line"><span style="color:#CE9409">    const</span><span style="color:#313233"> regex_t </span><span style="color:#CE9409">*</span><span style="color:#2D27A4">preg</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // compiled regular expression</span></span>
<span class="line"><span style="color:#CE9409">    const</span><span style="color:#CE9409"> char</span><span style="color:#CE9409"> *</span><span style="color:#2D27A4">string</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // string to match</span></span>
<span class="line"><span style="color:#CE9409">    size_t</span><span style="color:#2D27A4"> nmatch</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // number of elements in pmatch</span></span>
<span class="line"><span style="color:#313233">    regmatch_t </span><span style="color:#2D27A4">pmatch</span><span style="color:#CE9409">[]</span><span style="color:#313233">,</span><span style="color:#6E9D87"> // see below</span></span>
<span class="line"><span style="color:#CE9409">    int</span><span style="color:#313233"> eflags</span><span style="color:#6E9D87"> // flags</span></span>
<span class="line"><span style="color:#313233">    );</span></span></code></pre> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day06/#pmatchnmatch" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>pmatch/nmatch</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>pmatch/nmatch <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#846905">typedef</span><span style="color:#CE9409"> struct</span><span style="color:#313233"> {</span></span>
<span class="line"><span style="color:#313233">    regoff_t rm_so;</span><span style="color:#6E9D87"> // start of match</span></span>
<span class="line"><span style="color:#313233">    regoff_t rm_eo;</span><span style="color:#6E9D87"> // end of match</span></span>
<span class="line"><span style="color:#313233">} regmatch_t;</span></span></code></pre>
<p>If <code>regex == "([a-z]+) ([0-9]+)"</code> then <code>nmatch</code> should be 3.</p>
<p>if <code>string == "hello 123"</code>, then:</p>
<ul>
<li><code>pmatch[0]</code> is the entire match: <code>hello 123</code></li>
<li><code>match[1]</code> is <code>hello</code></li>
<li><code>pmatch[2]</code> is <code>123</code></li>
</ul> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day06/#return-value" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Return value</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Return value <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>0 for success, error code for failure. Can call <code>regerror()</code> to convert the error code to a string.</p> </span> </a>  </li></ul></details></li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 8 - Client-Server Model</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 8 - Client-Server Model <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#day-8---client-server-model" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 8 - Client-Server Model</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 8 - Client-Server Model <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#adv-of-client-server" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Adv. of Client-Server</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Adv. of Client-Server <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Strengthen modularity:</p>
<ul>
<li>Limit interaction between modules (no propagation of effects via global variables)</li>
<li>Prevent propagation of errors</li>
<li>Provide flexibility and interchangability</li>
</ul>
<p>Uses only message passing to communicate between modules.</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#soft-vs-hard-modularity" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Soft vs Hard Modularity</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Soft vs Hard Modularity <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Soft modularity is when an error can propagate between modules, while hard
modularity is when an error cannot.</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#protection-against-errors" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Protection Against Errors</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Protection Against Errors <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#soft-modularity" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Soft Modularity</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Soft Modularity <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Some programming languages can prevent too much error propagation but it is still difficult.</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#hard-modularity" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Hard Modularity</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Hard Modularity <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Client can time out and then try elsewhere</li>
</ul>
<p>Limited interaction means limited errors</p> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#possible-issues-with-messages" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Possible Issues with Messages</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Possible Issues with Messages <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>What if the message is lost?</p>
<ul>
<li>Do they all fail?</li>
<li>Do only some fail?</li>
<li>Are they out of order?</li>
</ul>
<p>If all messages are required then acknowledgement is usually needed.</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#if-clientserver-fails" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>If (client/server) fails</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>If (client/server) fails <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#client" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Client</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Client <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Server usually unaffected</li>
<li>if client fails midway through a request then the server can timeout</li>
</ul> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#server" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Server</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Server <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Client checks messages for correctness and validity</li>
<li>Client times out and tries a different server</li>
<li>Server is usually restartable without affecting clients</li>
</ul> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#possible-client-server-issues" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Possible Client-Server Issues</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Possible Client-Server Issues <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#representation" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Representation</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Representation <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>SerDe is hard! Little Endian vs Big Endian, etc.</p>
<hr>
<p>shoutout to protobufs</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#message-ordering" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Message Ordering</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Message Ordering <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Some networks can reorder messages</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#maliciousbuggy-servers--clients" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Malicious/Buggy Servers &amp; Clients</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Malicious/Buggy Servers &amp; Clients <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <hr>
<p>DDOS on server or a bug in server or client</p> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#scaling" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Scaling</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Scaling <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Multiple servers + multiple clients</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#multiple-clients" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Multiple Clients</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Multiple Clients <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Server might want to keep clients separate</li>
<li>Server might want to facilitate sharing</li>
</ul> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day08/#multiple-servers" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Multiple Servers</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Multiple Servers <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Client may request different services</li>
<li>Client might pick best server for its needs</li>
<li>Client might need to stick to one server</li>
</ul> </span> </a>  </li></ul></details></li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 9 - RPCs</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 9 - RPCs <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#day-9---rpcs" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 9 - RPCs</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 9 - RPCs <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#stubs" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Stubs</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Stubs <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Handles sending and receiving the command and arguments for both the client and the server.</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#client" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Client</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Client <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Serializes command + args and later receives the response from the server and passes it to the initiating process.</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#server" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Server</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Server <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Deserializes command + args and calls the requested method.</p> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#marshalingserialization" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Marshaling/Serialization</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Marshaling/Serialization <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Ensuring that the client and server data types are compatible.</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#hiccups-in-marshaling" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Hiccups in Marshaling</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Hiccups in Marshaling <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Little-endian vs big-endian</li>
<li>size of integers</li>
<li>floating point format (IEEE/Intel?)</li>
<li>Pointers (unswizzle/swizzle)</li>
</ul> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-4" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#swizzling" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Swizzling</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Swizzling <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Unswizzling is to give each object a unique identifier and then use that identifier in place of any pointers.</p>
<p>To swizzle is to replace the unique identifier with a pointer to the object.</p> </span> </a>  </li></ul></details></li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#error-handling" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Error Handling</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Error Handling <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#at-least-once" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>At least once</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>At least once <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Retry until client gets a positive acknowledgement.</p>
<p>Request should be idempotent. (aka no side effect from repeated requests)</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#at-most-once" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>At most once</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>At most once <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Send one request and wait for a response. If there’s no response then it’s considered failed but the client shouldn’t retry.</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#exactly-once" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Exactly once</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Exactly once <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Retry until acknowledgement</li>
<li>Client and server track requests</li>
<li>Much more complex
<ul>
<li>More corner cases</li>
<li>But more reliable</li>
</ul>
</li>
</ul> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#dealing-w-inefficiency" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Dealing w/ Inefficiency</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Dealing w/ Inefficiency <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Less efficient because:</p>
<ul>
<li>Marshaling takes time</li>
<li>Network takes time</li>
<li>Only pass by value allowed</li>
</ul> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#async-rpcs" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Async RPCs</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Async RPCs <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Client sends request and waits for an accept from the server</li>
<li>Then client can do other things while waiting for the response</li>
<li>After the client gets a response it sends and acknowledgement to the server to end the RPC</li>
</ul> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#intermediaries" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Intermediaries</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Intermediaries <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>If either is offline then buffers can be used instead.</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day09/#notification" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Notification</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Notification <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Push (initiator sends message) / Pull (initiator requests message)</li>
<li>Decoupled: intermediary makes decisions on when to deliver message</li>
</ul>
<p>Example:</p>
<ul>
<li>Publish/Subscribe: recipients subscribe to service, and are notified when a service “publishes” a new message</li>
</ul> </span> </a>  </li></ul></details></li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day11/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 11 - HTTP Server</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 11 - HTTP Server <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day11/#day-11---http-server" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 11 - HTTP Server</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 11 - HTTP Server <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day11/#your-http-server" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Your HTTP Server</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Your HTTP Server <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day11/#socketshelper-functions" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Sockets/Helper Functions</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Sockets/Helper Functions <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day11/#normal-socket-procedure" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Normal Socket Procedure</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Normal Socket Procedure <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-4" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day11/#listener_socket--socket" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>listener_socket = socket(...)</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>listener_socket = socket(...) <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Creates a listener socket</p> </span> </a>  </li><li class="depth-4" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day11/#bindlistener_socket" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>bind(listener_socket, ...)</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>bind(listener_socket, ...) <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Binds the listener socket to a port</p> </span> </a>  </li><li class="depth-4" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day11/#listenlistener_socket" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>listen(listener_socket, ...)</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>listen(listener_socket, ...) <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Starts listening for incoming connections</p> </span> </a>  </li><li class="depth-4" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day11/#acceptlistener_socket" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>accept(listener_socket, ...)</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>accept(listener_socket, ...) <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p><code>connection_fd = accept(listener_socket, ...)</code></p>
<p>Accepts a new connection, returning a file descriptor to that connection</p> </span> </a>  </li><li class="depth-4" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day11/#setsockoptconnection_fd" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>setsockopt(connection_fd, …)</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>setsockopt(connection_fd, …) <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Sets options for the connection, including timeouts (will return a EAGAIN error if the connection times out)</p> </span> </a>  </li><li class="depth-4" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day11/#typical-ordering" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Typical Ordering</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Typical Ordering <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ol>
<li>Make a socket</li>
<li>bind to a port</li>
<li>listen</li>
<li>accept</li>
<li>setsockopt</li>
<li>read/write</li>
<li>close</li>
</ol>
<p>See Day 5 to review read/write/close calls &#x26; file descriptors.</p> </span> </a>  </li></ul></details></li></ul></details></li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day12/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 12 - Virtualization</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 12 - Virtualization <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day12/#day-12---virtualization" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 12 - Virtualization</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 12 - Virtualization <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day12/#virtualization" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Virtualization</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Virtualization <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Client/server good because it forces organization and improves security. (less area of attack)</p>
<p>Client/server bad because you need many machines to run the server. Maybe virtualization can help? Docker time baby!</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day12/#multiplexing" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Multiplexing</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Multiplexing <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Is soft modularity</p>
<p>Three basic techniques:</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day12/#aggregation" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Aggregation</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Aggregation <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>One masquerading as many.
<img src="./images/day12/multiplexing.png" alt="One source advertising as many"></p>
<hr>
<p>One example is Disk Partitions</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day12/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n></span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n> <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Multiple masquerading as one.</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day12/#emulation" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Emulation</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Emulation <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <hr>
<p>One example is RAID</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day12/#virtual-memory" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Virtual Memory</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Virtual Memory <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Pretend to be something else.</p>
<p><img src="./images/day12/emulation.png" alt="many different sources pretending to be something else"></p>
<hr>
<p>One example is a CDN</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day12/#comm-link-bounded-buffers" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Comm Link: Bounded Buffers</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Comm Link: Bounded Buffers <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Gives each process an entire address space, but then behind the scenes coordinates with the OS (and hardware) to share the physical memory.</p>
<p>This lets multiple applications run at the same time without interfering with each other. (unless the entire computer runs out of memory)</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day12/#how-to-synchronize-bounded-buffers" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>How to Synchronize Bounded Buffers</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>How to Synchronize Bounded Buffers <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>An OS provides bounded buffers which allow threads to communicate via send/receive.</p> </span> </a>  </li></ul></details></li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day13/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 13 - Virtualization Cont.</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 13 - Virtualization Cont. <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day13/#day-13---virtualization-cont" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 13 - Virtualization Cont.</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 13 - Virtualization Cont. <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day13/#comparison-cyclic-executive-vs-separate-threads" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Comparison: Cyclic Executive vs Separate Threads</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Comparison: Cyclic Executive vs Separate Threads <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day13/#cyclic-executive" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Cyclic Executive</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Cyclic Executive <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Each task is given a fixed amount of time to run for each cycle</li>
<li>A task yields back to the scheduler after its time is up</li>
<li>The next task can only run after the current task yields</li>
<li>Tasks are run in a fixed order</li>
</ul> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day13/#separate-threads" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Separate Threads</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Separate Threads <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>all tasks run at the same time but are scheduled by the OS and can be interrupted /woven after any arbitrary assembly instruction, meaning that each task is no longer atomic</li>
</ul> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day13/#bounded-buffer" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Bounded Buffer</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Bounded Buffer <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Problem: counter = counter + 1 isn’t atomic</p>
<p>To make it atomic use mutexes to make sure a push’s increment can’t happen at the same time as a pop’s decrement.</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day13/#race-conditions" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Race conditions</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Race conditions <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day14/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 14 - Virtualization Cont.</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 14 - Virtualization Cont. <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day14/#day-14---virtualization-cont" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 14 - Virtualization Cont.</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 14 - Virtualization Cont. <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day14/#race-conditions" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Race conditions</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Race conditions <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>A race condition is when the behavior of a system depends on the timing of events.</p>
<hr>
<p>Doesn’t necessarily mean a bug, might just mean a different result.</p>
<p>That said, race conditions are difficult to diagnose because they are based on random timings.</p> </span> </a>  </li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day14/#mutual-exclusion-mutex" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Mutual Exclusion (Mutex)</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Mutual Exclusion (Mutex) <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Ensures that only one thread is inside a critical section at a time (where the code reads and manipulates a shared variable).</p>
<p>Shared variables can even include variables which are shared between parallel calls to the same function.</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day14/#how-to-use" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>How to Use</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>How to Use <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Call acquire before entering a critical section and call release after leaving the critical section. If there is a spinlock inside the critical section then make sure to regularly release and reacquire the lock during the spinlock.</p> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day14/#locks--condition-variables" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Locks &amp; Condition Variables</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Locks &amp; Condition Variables <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Each condition variable has exactly one lock.</p>
<p>Three functions:</p>
<ul>
<li><code>wait()</code> - release lock, wait for a signal/broadcast, reacquire lock</li>
<li><code>signal()</code> wake any one of the threads that are waiting on the condition variable</li>
<li><code>broadcast()</code> - wake all threads that are waiting on a condition variable</li>
</ul> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day14/#how-to-use-1" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>How to Use</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>How to Use <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Use to avoid busy waiting. An example is to have a condition variable for when a buffer is full and another for when a buffer is empty.</p> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day14/#semaphores" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Semaphores</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Semaphores <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Problem: previous solutions waste CPU times</p>
<p>Uses two atomic operations:</p>
<ul>
<li><code>up(S) &#x3C;- S + 1</code></li>
<li><code>down(S): while (S &#x3C;= 0) {}; S &#x3C;- S - 1</code>
<ul>
<li>Down can be modified to eliminate busy waiting for S to be greater than 0</li>
</ul>
</li>
</ul>
<p>Note: up is sometimes <code>V()</code> and down is sometimes <code>P()</code>.</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day14/#two-types" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Two Types</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Two Types <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Binary: 0 or 1
Counting: 0 to ∞</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day14/#general-synchronization" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>General Synchronization</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>General Synchronization <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li>Mutex</li>
<li>Rendezvous semaphore (one thread waits for another before proceeding)</li>
<li>Like rendezvous but n threads wait for the last one before proceeding</li>
</ul> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day14/#how-to-use-2" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>How to Use</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>How to Use <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Use to avoid busy waiting. An example is to have a semaphore for when a buffer is full (initialized to N) and another for when a buffer is empty (initialized to 0). Lastly use a binary semaphore to protect the buffer (inc/dec).</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day14/#binary-semaphore-vs-mutex" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Binary Semaphore vs Mutex</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Binary Semaphore vs Mutex <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>A binary semaphore can be used to implement a mutex but a mutex cannot be used to implement a binary semaphore. A mutex must be released by the same thread that acquired it while a binary semaphore can be released by any thread.</p> </span> </a>  </li></ul></details></li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day15/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 15 - Virtualization Cont.</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 15 - Virtualization Cont. <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day15/#day-15---virtualization-cont" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 15 - Virtualization Cont.</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 15 - Virtualization Cont. <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day15/#bounded-buffer-example" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Bounded Buffer Example</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Bounded Buffer Example <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#CE9409">#define</span><span style="color:#345348"> N</span><span style="color:#313233"> ...</span><span style="color:#6E9D87"> // buffer size</span></span>
<span class="line"></span>
<span class="line"><span style="color:#313233">Globals:</span></span>
<span class="line"><span style="color:#313233">    Item </span><span style="color:#2D27A4">buffer</span><span style="color:#313233">[N];</span></span>
<span class="line"><span style="color:#CE9409">    int</span><span style="color:#313233"> in </span><span style="color:#CE9409">=</span><span style="color:#413900"> 0</span><span style="color:#313233">, out </span><span style="color:#CE9409">=</span><span style="color:#413900"> 0</span><span style="color:#313233">, counter </span><span style="color:#CE9409">=</span><span style="color:#413900"> 0</span><span style="color:#313233">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">void</span><span style="color:#345348"> push</span><span style="color:#313233">(Item </span><span style="color:#2D27A4">item</span><span style="color:#313233">) {</span></span>
<span class="line"><span style="color:#CE9409">    while</span><span style="color:#313233"> (counter </span><span style="color:#CE9409">==</span><span style="color:#313233"> N) {}</span><span style="color:#6E9D87"> // busy waiting</span></span>
<span class="line"><span style="color:#2D27A4">    buffer</span><span style="color:#313233">[in] </span><span style="color:#CE9409">=</span><span style="color:#313233"> item;</span></span>
<span class="line"><span style="color:#313233">    in </span><span style="color:#CE9409">=</span><span style="color:#313233"> (in </span><span style="color:#CE9409">+</span><span style="color:#413900"> 1</span><span style="color:#313233">) </span><span style="color:#CE9409">%</span><span style="color:#313233"> N;</span></span>
<span class="line"><span style="color:#313233">    counter</span><span style="color:#CE9409">++</span><span style="color:#313233">;</span></span>
<span class="line"><span style="color:#313233">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#313233">Item </span><span style="color:#345348">pop</span><span style="color:#313233">() {</span></span>
<span class="line"><span style="color:#CE9409">    while</span><span style="color:#313233"> (counter </span><span style="color:#CE9409">==</span><span style="color:#413900"> 0</span><span style="color:#313233">) {}</span><span style="color:#6E9D87"> // busy waiting</span></span>
<span class="line"><span style="color:#313233">    Item item </span><span style="color:#CE9409">=</span><span style="color:#2D27A4"> buffer</span><span style="color:#313233">[out];</span></span>
<span class="line"><span style="color:#313233">    out </span><span style="color:#CE9409">=</span><span style="color:#313233"> (out </span><span style="color:#CE9409">+</span><span style="color:#413900"> 1</span><span style="color:#313233">) </span><span style="color:#CE9409">%</span><span style="color:#313233"> N;</span></span>
<span class="line"><span style="color:#313233">    counter</span><span style="color:#CE9409">--</span><span style="color:#313233">;</span></span>
<span class="line"><span style="color:#CE9409">    return</span><span style="color:#313233"> item;</span></span>
<span class="line"><span style="color:#313233">}</span></span>
<span class="line"></span></code></pre>
<p>The above code has a race condition.</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day15/#mutex" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Mutex</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Mutex <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>One possible fix is with a mutex:</p>
<pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#313233">Globals:</span></span>
<span class="line"><span style="color:#313233">    Lock l;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">void</span><span style="color:#345348"> push</span><span style="color:#313233">(Item </span><span style="color:#2D27A4">item</span><span style="color:#313233">) {</span></span>
<span class="line"><span style="color:#2D27A4">    l</span><span style="color:#313233">.</span><span style="color:#345348">acquire</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#CE9409">    while</span><span style="color:#313233"> (counter </span><span style="color:#CE9409">==</span><span style="color:#313233"> N) {</span></span>
<span class="line"><span style="color:#2D27A4">        l</span><span style="color:#313233">.</span><span style="color:#345348">release</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#2D27A4">        l</span><span style="color:#313233">.</span><span style="color:#345348">acquire</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#313233">    }</span><span style="color:#6E9D87"> // busy waiting</span></span>
<span class="line"><span style="color:#2D27A4">    Buffer</span><span style="color:#313233">[in] </span><span style="color:#CE9409">=</span><span style="color:#313233"> item;</span></span>
<span class="line"><span style="color:#313233">    in </span><span style="color:#CE9409">=</span><span style="color:#313233"> (in </span><span style="color:#CE9409">+</span><span style="color:#413900"> 1</span><span style="color:#313233">) </span><span style="color:#CE9409">%</span><span style="color:#313233"> N;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#313233">    counter</span><span style="color:#CE9409">++</span><span style="color:#313233">;</span></span>
<span class="line"><span style="color:#2D27A4">    l</span><span style="color:#313233">.</span><span style="color:#345348">release</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#313233">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">void</span><span style="color:#345348"> pop</span><span style="color:#313233">() {</span></span>
<span class="line"><span style="color:#2D27A4">    l</span><span style="color:#313233">.</span><span style="color:#345348">acquire</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#CE9409">    while</span><span style="color:#313233"> (counter </span><span style="color:#CE9409">==</span><span style="color:#413900"> 0</span><span style="color:#313233">) {</span></span>
<span class="line"><span style="color:#2D27A4">        l</span><span style="color:#313233">.</span><span style="color:#345348">release</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#2D27A4">        l</span><span style="color:#313233">.</span><span style="color:#345348">acquire</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#313233">    }</span><span style="color:#6E9D87"> // busy waiting</span></span>
<span class="line"><span style="color:#313233">    Item item </span><span style="color:#CE9409">=</span><span style="color:#2D27A4"> buffer</span><span style="color:#313233">[out];</span></span>
<span class="line"><span style="color:#313233">    out </span><span style="color:#CE9409">=</span><span style="color:#313233"> (out </span><span style="color:#CE9409">+</span><span style="color:#413900"> 1</span><span style="color:#313233">) </span><span style="color:#CE9409">%</span><span style="color:#313233"> N;</span></span>
<span class="line"><span style="color:#313233">    counter</span><span style="color:#CE9409">--</span><span style="color:#313233">;</span></span>
<span class="line"><span style="color:#2D27A4">    l</span><span style="color:#313233">.</span><span style="color:#345348">release</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#CE9409">    return</span><span style="color:#313233"> item;</span></span>
<span class="line"><span style="color:#313233">}</span></span>
<span class="line"></span></code></pre> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day15/#condition-variable" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Condition Variable</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Condition Variable <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>However, the mutex solution creates needless spin locks. A better solution is to use condition variables:</p>
<pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#313233">Globals:</span></span>
<span class="line"><span style="color:#313233">    Lock l;</span></span>
<span class="line"><span style="color:#313233">    Condition full, empty;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">void</span><span style="color:#345348"> push</span><span style="color:#313233">(Item </span><span style="color:#2D27A4">item</span><span style="color:#313233">) {</span></span>
<span class="line"><span style="color:#2D27A4">    l</span><span style="color:#313233">.</span><span style="color:#345348">acquire</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#CE9409">    while</span><span style="color:#313233"> (counter </span><span style="color:#CE9409">==</span><span style="color:#313233"> N) {</span></span>
<span class="line"><span style="color:#2D27A4">        full</span><span style="color:#313233">.</span><span style="color:#345348">wait</span><span style="color:#313233">(l);</span></span>
<span class="line"><span style="color:#313233">    }</span><span style="color:#6E9D87"> // busy waiting</span></span>
<span class="line"><span style="color:#2D27A4">    Buffer</span><span style="color:#313233">[in] </span><span style="color:#CE9409">=</span><span style="color:#313233"> item;</span></span>
<span class="line"><span style="color:#313233">    in </span><span style="color:#CE9409">=</span><span style="color:#313233"> (in </span><span style="color:#CE9409">+</span><span style="color:#413900"> 1</span><span style="color:#313233">) </span><span style="color:#CE9409">%</span><span style="color:#313233"> N;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#313233">    counter</span><span style="color:#CE9409">++</span><span style="color:#313233">;</span></span>
<span class="line"><span style="color:#2D27A4">    empty</span><span style="color:#313233">.</span><span style="color:#345348">signal</span><span style="color:#313233">(l);</span></span>
<span class="line"><span style="color:#2D27A4">    l</span><span style="color:#313233">.</span><span style="color:#345348">release</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#313233">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">void</span><span style="color:#345348"> pop</span><span style="color:#313233">() {</span></span>
<span class="line"><span style="color:#2D27A4">    l</span><span style="color:#313233">.</span><span style="color:#345348">acquire</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#CE9409">    while</span><span style="color:#313233"> (counter </span><span style="color:#CE9409">==</span><span style="color:#413900"> 0</span><span style="color:#313233">) {</span></span>
<span class="line"><span style="color:#2D27A4">        empty</span><span style="color:#313233">.</span><span style="color:#345348">wait</span><span style="color:#313233">(l);</span></span>
<span class="line"><span style="color:#313233">    }</span><span style="color:#6E9D87"> // busy waiting</span></span>
<span class="line"><span style="color:#313233">    Item item </span><span style="color:#CE9409">=</span><span style="color:#2D27A4"> buffer</span><span style="color:#313233">[out];</span></span>
<span class="line"><span style="color:#313233">    out </span><span style="color:#CE9409">=</span><span style="color:#313233"> (out </span><span style="color:#CE9409">+</span><span style="color:#413900"> 1</span><span style="color:#313233">) </span><span style="color:#CE9409">%</span><span style="color:#313233"> N;</span></span>
<span class="line"><span style="color:#313233">    counter</span><span style="color:#CE9409">--</span><span style="color:#313233">;</span></span>
<span class="line"><span style="color:#2D27A4">    full</span><span style="color:#313233">.</span><span style="color:#345348">signal</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#2D27A4">    l</span><span style="color:#313233">.</span><span style="color:#345348">release</span><span style="color:#313233">();</span></span>
<span class="line"><span style="color:#CE9409">    return</span><span style="color:#313233"> item;</span></span>
<span class="line"><span style="color:#313233">}</span></span></code></pre> </span> </a>  </li></ul></details></li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day18/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 18 - Mutexless</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 18 - Mutexless <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day18/#day-18---mutexless" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 18 - Mutexless</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 18 - Mutexless <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day18/#strict-alternation" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Strict Alternation</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Strict Alternation <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Taking turns by using a shared variable to keep track
of whose turn it is</p>
<p>Waiting thread spins on reading the shared variable, checking whether the shared variable is equal to its own ID</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day18/#downsides" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Downsides</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Downsides <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Only two threads allowed</p>
<p>A thread busy doing noncritical work can prevent the other thread from entering the critical section</p>
<p>Either thread can crash, causing the other to wait indefinitely</p> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day18/#dekkers-algorithm" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Dekker’s Algorithm</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Dekker’s Algorithm <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Track turn and have threads proclaim interest.</p>
<p>Give mutex to a thread only if other thread is not interested and it’s the thread’s turn.</p>
<p>Keep an array called <code>wants_to_enter</code> to track interest of the threads.</p>
<p>Then have each thread wait until either it is their turn or the other thread is not interested. While a thread is waiting it sets <code>wants_to_enter</code> to <code>false</code> and then switches back to <code>true</code> once it’s their turn.</p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day18/#code" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Code</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Code <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#CE9409">bool</span><span style="color:#2D27A4"> wants_to_enter</span><span style="color:#313233">[</span><span style="color:#413900">2</span><span style="color:#313233">] </span><span style="color:#CE9409">=</span><span style="color:#313233"> {</span><span style="color:#413900">false</span><span style="color:#313233">, </span><span style="color:#413900">false</span><span style="color:#313233">};</span></span>
<span class="line"><span style="color:#CE9409">while</span><span style="color:#2D27A4"> wants_to_enter</span><span style="color:#313233">[other_id] {</span></span>
<span class="line"><span style="color:#CE9409">    if</span><span style="color:#313233"> turn </span><span style="color:#CE9409">!=</span><span style="color:#313233"> id {</span></span>
<span class="line"><span style="color:#2D27A4">        wants_to_enter</span><span style="color:#313233">[id] </span><span style="color:#CE9409">=</span><span style="color:#413900"> false</span><span style="color:#313233">;</span></span>
<span class="line"><span style="color:#CE9409">        while</span><span style="color:#313233"> turn </span><span style="color:#CE9409">!=</span><span style="color:#313233"> id {</span></span>
<span class="line"><span style="color:#6E9D87">            // busy wait</span></span>
<span class="line"><span style="color:#313233">        }</span></span>
<span class="line"><span style="color:#2D27A4">        wants_to_enter</span><span style="color:#313233">[id] </span><span style="color:#CE9409">=</span><span style="color:#413900"> true</span><span style="color:#313233">;</span></span>
<span class="line"><span style="color:#313233">    }</span></span>
<span class="line"><span style="color:#313233">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E9D87">// critical section</span></span>
<span class="line"><span style="color:#313233">turn </span><span style="color:#CE9409">=</span><span style="color:#313233"> other_id;</span></span>
<span class="line"><span style="color:#2D27A4">wants_to_enter</span><span style="color:#313233">[id] </span><span style="color:#CE9409">=</span><span style="color:#413900"> false</span><span style="color:#313233">;</span></span>
<span class="line"><span style="color:#6E9D87">// remainder section</span></span>
<span class="line"></span></code></pre>
<p>Supporting any number of threads is technically possible.</p>
<p>No thread that is outside a critical reagion can block because a thread proclaims interest only when it is in the critical section.</p>
<p>As long as the critical region eventually terminates, all threads get a turn.</p> </span> </a>  </li></ul></details></li><li class="depth-2" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day18/#lamports-bakery-algorithm" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Lamport’s Bakery Algorithm</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Lamport’s Bakery Algorithm <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p>Named after the bakery ticket system where you take a number and wait until your number is called.</p>
<p>When a thread wants to lock, it looks at all other threads and takes a number that is one greater than the maximum number of all other threads. Then it waits until all other threads with a nonzero number less than its own have finished. To break ties, the thread with the lower ID goes first.</p>
<p>There’s a problem though:</p>
<pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#313233">m </span><span style="color:#CE9409">=</span><span style="color:#345348"> max</span><span style="color:#313233">(thread_numbers);</span></span>
<span class="line"><span style="color:#313233">my_number </span><span style="color:#CE9409">=</span><span style="color:#313233"> m </span><span style="color:#CE9409">+</span><span style="color:#413900"> 1</span><span style="color:#313233">;</span></span></code></pre>
<p>The above is not atomic. To solve this we keep an array of <code>entering</code> to track whether any thead is inside the above critical section. Then we wait to lock until both no one’s in the critical section and the above condition is true:</p>
<pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#345348">lock</span><span style="color:#313233">(</span><span style="color:#CE9409">int</span><span style="color:#2D27A4"> id</span><span style="color:#313233">) {</span></span>
<span class="line"><span style="color:#2D27A4">    entering</span><span style="color:#313233">[id] </span><span style="color:#CE9409">=</span><span style="color:#413900"> true</span><span style="color:#313233">;</span></span>
<span class="line"><span style="color:#313233">    m </span><span style="color:#CE9409">=</span><span style="color:#345348"> max</span><span style="color:#313233">(thread_numbers);</span></span>
<span class="line"><span style="color:#313233">    my_number </span><span style="color:#CE9409">=</span><span style="color:#313233"> m </span><span style="color:#CE9409">+</span><span style="color:#413900"> 1</span><span style="color:#313233">;</span></span>
<span class="line"><span style="color:#2D27A4">    entering</span><span style="color:#313233">[id] </span><span style="color:#CE9409">=</span><span style="color:#413900"> false</span><span style="color:#313233">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">    for</span><span style="color:#313233"> (j in threads) {</span></span>
<span class="line"><span style="color:#CE9409">        while</span><span style="color:#313233"> (</span><span style="color:#2D27A4">entering</span><span style="color:#313233">[j]) {</span></span>
<span class="line"><span style="color:#6E9D87">            // busy wait</span></span>
<span class="line"><span style="color:#313233">        }</span></span>
<span class="line"><span style="color:#CE9409">        while</span><span style="color:#313233"> (</span><span style="color:#2D27A4">thread_numbers</span><span style="color:#313233">[j] </span><span style="color:#CE9409">!=</span><span style="color:#413900"> 0</span></span>
<span class="line"><span style="color:#CE9409">            &#x26;&#x26;</span><span style="color:#313233"> (</span></span>
<span class="line"><span style="color:#2D27A4">                thread_numbers</span><span style="color:#313233">[j] </span><span style="color:#CE9409">&#x3C;</span><span style="color:#313233"> my_number</span></span>
<span class="line"><span style="color:#CE9409">                ||</span><span style="color:#313233"> (</span><span style="color:#2D27A4">thread_numbers</span><span style="color:#313233">[j] </span><span style="color:#CE9409">==</span><span style="color:#313233"> my_number </span><span style="color:#CE9409">&#x26;&#x26;</span><span style="color:#313233"> j </span><span style="color:#CE9409">&#x3C;</span><span style="color:#313233"> id)</span></span>
<span class="line"><span style="color:#313233">            )</span></span>
<span class="line"><span style="color:#313233">        ) {</span></span>
<span class="line"><span style="color:#6E9D87">            // busy wait</span></span>
<span class="line"><span style="color:#313233">        }</span></span>
<span class="line"><span style="color:#313233">    }</span></span>
<span class="line"><span style="color:#313233">}</span></span></code></pre>
<p>Finally, this supports any number of threads, ensuring one thread at a time in the critical section and doesn’t require atomicity; but it does use busy waiting.</p> </span> </a>  </li></ul></details></li></ul></details></li><li class="depth-0" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day19/#" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 18 - Mutexless</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 18 - Mutexless <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-1" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day19/#day-19---args" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Day 19 - Args</span> <span class="desc empty" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Day 19 - Args <button data-astro-cid-3yihdz5n>✕</button> </header>  </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-2" data-astro-cid-dcfgkfct><details open data-astro-cid-dcfgkfct><summary data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day19/#getopt" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>getopt()</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>getopt() <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <pre class="astro-code by https://github.com/el-angel/theme-editor" style="background-color:#E5E6E2;color:#19191A; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#CE9409">#include</span><span style="color:#846905"> &#x3C;unistd.h></span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9409">int</span><span style="color:#345348"> getopt</span><span style="color:#313233">(</span><span style="color:#CE9409">int</span><span style="color:#2D27A4"> argc</span><span style="color:#313233">, </span><span style="color:#CE9409">char</span><span style="color:#CE9409"> *const</span><span style="color:#2D27A4"> argv</span><span style="color:#CE9409">[]</span><span style="color:#313233">, </span><span style="color:#CE9409">const</span><span style="color:#CE9409"> char</span><span style="color:#CE9409"> *</span><span style="color:#2D27A4">optstring</span><span style="color:#313233">);</span></span></code></pre>
<p>Example optstring for server arguments: <code>"t:</code></p> </span> </a>  </summary><ul data-astro-cid-dcfgkfct><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day19/#returns" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Returns</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Returns <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <ul>
<li><code>-1</code> when there are no more options - argv == null</li>
<li><code>?</code> when an option is not recognized - argv = null, optopt = the character of the option found</li>
<li>The character of the option found - argv = the inputted argument of the option found</li>
</ul> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day19/#errors" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>Errors</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>Errors <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p><code>opterror</code> - enables or disables error messages.</p>
<p><code>?</code> from getopt means there was an error and <code>optopt</code> is the character of the option that caused the error.</p> </span> </a>  </li><li class="depth-3" data-astro-cid-dcfgkfct> <a href="/cse130-notes/notes/day19/#optind" class="header-preview" data-astro-cid-3yihdz5n> <span data-astro-cid-3yihdz5n>optind</span> <span class="desc" data-astro-cid-3yihdz5n> <header data-astro-cid-3yihdz5n>optind <button data-astro-cid-3yihdz5n>✕</button> <hr data-astro-cid-3yihdz5n></header> <p><code>optind</code> is the index of the next element to be processed in argv or NULL if there are no non option arguments.</p> </span> </a>  </li></ul></details></li></ul></details></li></ul></details></li> </ul>   </body> </html> 